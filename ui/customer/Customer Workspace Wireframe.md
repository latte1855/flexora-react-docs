# 🎨 Screen 1：Customer Workspace – List + Sidebar

**Route**：`/crm/customers`
**Layout**：ECME 預設 `AppLayout` 裡的一個「內容頁 + 左側窄側欄」

---

## 1.1 Wireframe 結構（Top-level 區塊）

```text
+-----------------------------------------------------------------------------------+
| Top Bar (Ecme header, 保持共用)                                                  |
+-----------------------------------------------------------------------------------+
| SIDEBAR (Left 240px)         | MAIN CONTENT (剩餘寬度)                            |
|------------------------------+----------------------------------------------------|
| [Title] 客戶清單              | [Page Header]                                     |
|                              |  - 標題：客戶管理 Customer Workspace              |
|  [My Lists]                  |  - 右側：Toolbar 按鈕                             |
|   - 我負責的客戶 (*)         |                                                  |
|   - 最近新增 (30 天)         |  [Filter Bar - 橫向]                               |
|   - 最近有互動               |                                                  |
|   - 需要跟進                 |  [Customer Table - TanStack Table]                |
|                              |                                                  |
|  [Shared Lists]              |                                                  |
|   - 全部客戶                 |                                                  |
|   - VIP 客戶                 |                                                  |
|   - 冷凍客戶                 |                                                  |
|   - 高潛力（將來用）         |                                                  |
+-----------------------------------------------------------------------------------+
```

---

## 1.2 Sidebar – 快速清單（Smart Lists）

**區塊：**

* 標題：`我的清單`

  * `我負責的客戶`（預設選取，有強調樣式，左側小圖示：user）
  * `最近新增 (30 天)`
  * `最近有互動`
  * `需要跟進`

* 標題：`共享清單`

  * `全部客戶`
  * `VIP 客戶`
  * `冷凍客戶`
  * `高潛力客戶`（預留，先 UI）

**每個清單項目：**

* 左側 icon
* 文字
* 右側可顯示數量 (badge，可選)
* 被選取時：背景色 + 左側色條（對齊報價 Hub 樣式）

---

## 1.3 Page Header + Toolbar

**位置：** Main Content 上方

```text
[客戶管理 Customer Workspace]                        [ + 新增客戶 ][ 匯入 ][ 匯出 ][ 更多⋯ ]
```

* 左側：頁面標題 + 簡短描述（例如「管理客戶主檔、跟進狀態與互動紀錄」）
* 右側按鈕（從右向左排）：

  * `+ 新增客戶`（Primary）
  * `匯入`（Secondary，下拉）
  * `匯出`（Secondary）
  * `更多 ...`（Kebab menu，可放「欄位設定」、「儲存為清單」等）

---

## 1.4 Filter Bar（列表上方條件區）

放在 Table 上方一行，使用 Ecme 的 filter bar 樣式：

```text
[ 🔍 搜尋框（名稱 / 代號 / 統編 / 電話 / Email）               ][ 重設條件 ]
[ Owner 下拉 ][ Segment 下拉 ][ 行業別 下拉 ][ 健康狀態 下拉 ][ Follow-up 狀態 下拉 ]
```

* 搜尋框 Placeholder：`搜尋名稱 / 客戶代號 / 統一編號 / 電話 / Email`
* 下拉範例：

  * Owner：顯示使用者清單（含「全部」）
  * Segment：All / VIP / A / B / C
  * 健康狀態：All / 🟢 綠 / 🟡 黃 / 🔴 紅
  * Follow-up 狀態：All / 逾期 / 7 日內 / 無安排

---

## 1.5 Customer Table（TanStack Table）

### 表頭欄位（左→右）

1. `選取框`（多選用 checkbox）
2. `客戶`

   * 主文字：`customerName`
   * 副文字：`customerNo`（灰色小字）
3. `Segment`

   * Badge：`VIP / A / B / C`
4. `Owner`

   * 頭像圈圈（縮寫）+ 名字
5. `健康狀態`

   * 小圓點：🟢 / 🟡 / 🔴
   * 旁邊文字顯示「近期互動日：YYYY/MM/DD」
6. `跟進`

   * 日期：`YYYY/MM/DD`
   * 底下小字顯示 `nextFollowUpNote`（截斷顯示）
7. `電話`
8. `Email`
9. `行業別`
10. `狀態`

    * Enable / Disable badge
11. `操作`

    * [檢視] [⋯]

### 列表互動

* 點整列（非按鈕區域） → 開啟右側 Drawer（Screen 2）
* 點「檢視」 → 導到 Detail Page（Screen 3）
* 勾選多筆 → 顯示 Table 上方的批次工具列（例如批次變更 Owner / Segment）

---

# 🎨 Screen 2：Customer Quick Drawer（右側）

**觸發方式**：點擊列表任一列（含客戶名稱）
**位置**：右側從畫面邊緣滑出，寬度約 480–560px

---

## 2.1 Drawer 整體結構

```text
+-------------------------------------------------------------+
| [客戶名稱]                          [X] 關閉                |
| [Segment Badge]  [Owner]                                     |
+-------------------------------------------------------------+
| 基本資料                                                     |
|  - 客戶代號                                                 |
|  - 電話 / Email                                              |
|  - 行業別                                                    |
|  - 網站                                                      |
+-------------------------------------------------------------+
| 跟進 Follow-up                                              |
|  [日期 DatePicker]                                          |
|  [說明 Textarea (2 行)]                                     |
|  [ 儲存變更 ] [ 清除跟進 ]                                  |
+-------------------------------------------------------------+
| 最近活動 Recent Activity (前 5 筆)                          |
|  - 2025/11/23 通話：討論報價 QTN-001                        |
|  - 2025/11/18 備註：詢問付款時間                            |
|  ...                                                        |
|  [ 查看全部活動 ]                                           |
+-------------------------------------------------------------+
| 快速動作 Quick Actions                                      |
|  [ 建立報價 ] [ 建立商機 ] [ 建立訂單 ]                     |
+-------------------------------------------------------------+
```

---

## 2.2 Header

* 大標：`客戶名稱`
* 下方：`[Segment Badge] [Owner 名稱]`
* 右側：關閉 icon（X）

---

## 2.3 基本資料區塊

使用 card/section 樣式：

* 客戶代號
* 行業別
* 電話
* Email
* 網站

（內容以 label + value 的兩欄 layout 顯示）

---

## 2.4 Follow-up 區塊

標題：`跟進 Follow-up`

* `下一次跟進日期`：DatePicker
* `跟進說明`：Textarea（約 2 行高，顯示 `nextFollowUpNote`）
* 按鈕：

  * `儲存變更`（Primary）
  * `清除跟進`（Secondary / Link 樣式）

---

## 2.5 最近活動 Recent Activity

簡單列表樣式，每一行：

* 日期（YYYY/MM/DD）
* 活動內容摘要（前 30~40 字）

最下方加一個 link-styled 按鈕：`查看全部活動` → 跳到 Detail Page 的「互動紀錄」tab。

---

## 2.6 快速動作區

三個按鈕排一行或兩行：

* `建立報價`
* `建立商機`
* `建立訂單`

初期可以只彈提示訊息或導向對應模組（即使 API 尚未串接）。

---

# 🎨 Screen 3：Customer Detail Page（Tab）

**Route**：`/crm/customers/:id`

---

## 3.1 頁首區域（Header）

```text
[返回列表] 客戶詳細資料                             [ 編輯 ][ 更多⋯ ]
---------------------------------------------------------------
[客戶名稱]  [Segment] [Owner] [健康狀態燈號]
[客戶代號]  [電話] [Email] [行業別]
---------------------------------------------------------------
[TAB] 資料 | 聯絡人 | 互動紀錄 | 報價 | 商機 | 訂單 | 附件
```

* 左上「返回列表」按鈕
* 右上 `編輯`（若預設就是可編輯，可以改成「儲存 / 取消」）

---

## 3.2 Tab：資料（General）

左 2/3：主要欄位表單
右 1/3：摘要資訊（可重用 Drawer 的 Follow-up 區塊）

**左側表單欄位：**

* 客戶代號（CustomerNo）
* 客戶名稱
* Segment（VIP/A/B/C 下拉）
* Owner（下拉）
* 行業別
* 員工人數
* 年營收
* 電話
* Email
* 網站
* 傳真
* 描述（Textarea）

**右側摘要：**

* 健康狀態燈號（🟢 / 🟡 / 🔴）
* 最近互動日期（lastActivityAt）
* 跟進日期 + 說明（可編輯）

---

## 3.3 Tab：聯絡人（Contacts）

標準列表 + 新增按鈕：

* 「新增聯絡人」按鈕
* Table 欄位：

  * 姓名
  * 職稱
  * 電話
  * Email
  * 是否主要聯絡人
  * 操作（編輯 / 刪除）

---

## 3.4 Tab：互動紀錄（ActivityLog）

上方：新增活動按鈕
下方：活動 timeline / table

每個活動顯示：

* 日期時間
* 類型（CALL / EMAIL / MEETING / NOTE…）
* 內容（多行文字）
* 建立人

---

## 3.5 Tab：報價 / 商機 / 訂單 / 附件

這幾個 Tab 可以先只做：

* 上方：新增按鈕（可先只導頁）
* 下方：簡單 Table 列出相關資料（只讀）

例如「報價」Tab：

* 報價單號
* 建立日期
* 總金額
* 狀態
* 操作（檢視）

---