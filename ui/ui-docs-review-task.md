# 各模組設計文件調整與驗證任務

> 創建日期：2025-12-08  
> 基於：Phase 6 Quotes Workspace Refactoring 經驗總結  
> 目標：為各模組建立清晰的設計文件，確認後開始開發

---

## 任務背景

在 Phase 6 報價單重構過程中，我們：
1. 成功將 QuotesWorkspace 重構為使用共用 Workspace 元件
2. 定義了詳情頁 Overlay 和完整編輯頁的 UI 規範
3. 整合了 ModuleWorkflowDrawer
4. 解決了大量 TypeScript 類型問題
5. 建立了清晰的設計決策記錄

**現在的目標**：將這些經驗和規範應用到其他模組的設計文件中，確保所有模組都有清晰的開發指南。

---

## 核心目標

### 主要目標

將報價單重構過程中的**設計決策**、**UI 規範**、**元件使用模式**整理並應用到各模組文件中。

### 具體成果

1. ✅ 每個模組都有清晰的 UI 結構定義
2. ✅ 每個模組都知道該使用哪些共用元件
3. ✅ 每個模組都有明確的類型定義指南
4. ✅ 開發者可以直接根據文件開始開發
5. ✅ 避免重複報價單重構時遇到的問題

---

## 從報價單重構中學到的關鍵經驗

### 1. UI 結構規範 ⭐⭐⭐⭐⭐

**經驗**：
- 詳情頁 Overlay 和完整編輯頁有不同的 UI 結構
- 需要明確定義何時用 Overlay、何時用完整頁面
- 按鈕配置、寬度設定都需要規範

**應用**：
- 為每個模組定義 Overlay 和編輯頁的結構
- 明確列出必要的按鈕和功能
- 統一寬度、間距等視覺規範

### 2. 元件使用模式 ⭐⭐⭐⭐⭐

**經驗**：
- ModuleWorkspace 的 props 配置
- ModuleWorkflowDrawer 的整合方式
- 詳情頁元件的組合方式

**應用**：
- 為每個模組提供元件使用範例
- 說明哪些 props 是必須的
- 提供完整的程式碼範本

### 3. 類型定義策略 ⭐⭐⭐⭐

**經驗**：
- 前端類型需要與後端 DTO 對齊
- 可選欄位要正確標記
- null/undefined 處理要一致

**應用**：
- 為每個模組定義核心類型
- 說明與後端 DTO 的對應關係
- 提供類型定義檢查清單

### 4. 設計決策記錄 ⭐⭐⭐

**經驗**：
- 為什麼選擇某種實作方式
- 遇到什麼問題、如何解決
- 哪些是可以重用的模式

**應用**：
- 記錄每個模組的特殊需求
- 說明與報價單的差異
- 提供決策參考

---

## 任務範圍

### 需要調整的模組文件

根據現有模組，需要調整以下文件：

#### 1. Sales Order（銷售訂單）⭐⭐⭐⭐⭐

**優先級**：最高（已有部分實作）

**需要定義**：
- [ ] 主頁結構（類似報價單）
- [ ] 詳情頁 Overlay 結構
- [ ] 訂單編輯頁結構（vs 報價編輯頁的差異）
- [ ] Workflow 整合方式
- [ ] 核心類型定義
- [ ] 與報價單的關聯處理

#### 2. Customer（客戶管理）⭐⭐⭐⭐

**優先級**：高

**需要定義**：
- [ ] 主頁結構
- [ ] 客戶詳情頁結構
- [ ] 客戶編輯頁結構
- [ ] 聯絡人管理 UI
- [ ] 地址管理 UI
- [ ] 核心類型定義

#### 3. Inventory（庫存管理）⭐⭐⭐

**優先級**：中

**需要定義**：
- [ ] 主頁結構
- [ ] SKU 詳情頁結構
- [ ] SKU 編輯頁結構
- [ ] 庫存調整 UI
- [ ] 核心類型定義

#### 4. 其他模組 ⭐⭐

**優先級**：低（視需求）

- Purchase Order（採購訂單）
- Supplier（供應商）
- Product（產品）
- 等等...

---

## 任務執行計劃

### Phase 1: 整理報價單重構經驗 ✅

**目標**：將報價單重構的經驗系統化整理

**產出**：
- [x] 完成總結文件（walkthrough.md）
- [x] 識別可重用的模式
- [x] 識別需要避免的問題

**狀態**：已完成

### Phase 2: 建立模組設計文件範本 📝

**目標**：創建一個標準的模組設計文件範本

**產出**：
- [ ] 模組設計文件範本（module-design-template.md）
- [ ] 包含所有必要章節
- [ ] 提供填寫指南

**預估時間**：1-2 小時

**內容結構**：
```markdown
# [模組名稱] 設計文件

## 1. 模組概述
- 功能說明
- 與其他模組的關聯

## 2. UI 結構定義
### 2.1 主頁（Workspace）
- 使用的元件
- Props 配置
- 程式碼範例

### 2.2 詳情頁 Overlay
- 結構定義
- 必要按鈕
- 程式碼範例

### 2.3 完整編輯頁
- 結構定義
- 表單欄位
- 程式碼範例

## 3. 類型定義
- 核心類型列表
- 與後端 DTO 對應
- 範例程式碼

## 4. Workflow 整合
- 是否需要 Workflow
- 整合方式
- 程式碼範例

## 5. 特殊需求
- 與標準模式的差異
- 特殊處理邏輯

## 6. 開發檢查清單
- 必須實作的功能
- 可選功能
- 測試項目
```

### Phase 3: 調整 Sales Order 文件 📝

**目標**：為 Sales Order 建立完整的設計文件

**依據**：
- 報價單重構經驗
- Sales Order 已有的部分實作
- 業務需求

**步驟**：
1. [ ] 分析 Sales Order 與 Quotes 的差異
2. [ ] 定義 Sales Order 的 UI 結構
3. [ ] 定義核心類型
4. [ ] 定義 Workflow 整合方式
5. [ ] 撰寫開發檢查清單
6. [ ] Review 並確認

**產出**：
- [ ] `docs/modules/sales-order/design.md`

**預估時間**：2-3 小時

### Phase 4: 調整 Customer 文件 📝

**目標**：為 Customer 建立完整的設計文件

**特殊考量**：
- 客戶管理與報價單/訂單的關聯
- 聯絡人管理
- 地址管理

**步驟**：
1. [ ] 定義 Customer 的 UI 結構
2. [ ] 定義聯絡人管理 UI
3. [ ] 定義地址管理 UI
4. [ ] 定義核心類型
5. [ ] 撰寫開發檢查清單
6. [ ] Review 並確認

**產出**：
- [ ] `docs/modules/customer/design.md`

**預估時間**：2-3 小時

### Phase 5: 調整 Inventory 文件 📝

**目標**：為 Inventory 建立完整的設計文件

**特殊考量**：
- SKU 管理
- 庫存調整
- 批次管理

**步驟**：
1. [ ] 定義 Inventory 的 UI 結構
2. [ ] 定義 SKU 詳情頁結構
3. [ ] 定義庫存調整 UI
4. [ ] 定義核心類型
5. [ ] 撰寫開發檢查清單
6. [ ] Review 並確認

**產出**：
- [ ] `docs/modules/inventory/design.md`

**預估時間**：2-3 小時

### Phase 6: 更新共用元件文件 📝

**目標**：根據實際使用經驗，完善共用元件文件

**重點**：
- workspace-components.md
- Button 元件文件（新增）
- 類型定義指南（新增）

**步驟**：
1. [ ] Review workspace-components.md
2. [ ] 補充缺失的範例
3. [ ] 新增 Button 元件文件
4. [ ] 新增類型定義指南
5. [ ] 更新 README.md

**產出**：
- [ ] 更新 `docs/ui/components/workspace-components.md`
- [ ] 新增 `docs/ui/components/button.md`
- [ ] 新增 `docs/ui/types/type-definition-guide.md`
- [ ] 更新 `docs/ui/components/README.md`

**預估時間**：2-3 小時

### Phase 7: 最終 Review 與確認 ✅

**目標**：確保所有文件都完整、準確、可用

**步驟**：
1. [ ] 檢查所有文件的完整性
2. [ ] 驗證程式碼範例可執行
3. [ ] 確認與實際元件 API 一致
4. [ ] 用戶 Review 並確認
5. [ ] 根據反饋調整

**產出**：
- [ ] Review 報告
- [ ] 確認可以開始開發

**預估時間**：1-2 小時

---

## 關鍵產出物

### 1. 模組設計文件範本

**路徑**：`docs/modules/module-design-template.md`

**用途**：
- 為新模組提供標準範本
- 確保所有模組文件結構一致
- 加速文件撰寫過程

### 2. 各模組設計文件

**路徑**：
- `docs/modules/sales-order/design.md`
- `docs/modules/customer/design.md`
- `docs/modules/inventory/design.md`

**用途**：
- 開發者的開發指南
- 包含完整的 UI 結構、類型定義、程式碼範例
- 可以直接根據文件開始開發

### 3. 完善的共用元件文件

**路徑**：
- `docs/ui/components/workspace-components.md`（更新）
- `docs/ui/components/button.md`（新增）
- `docs/ui/types/type-definition-guide.md`（新增）

**用途**：
- 元件使用參考
- 類型定義指南
- 最佳實踐範例

---

## 成功標準

### 文件品質標準

- [ ] **完整性**：涵蓋所有必要的章節
- [ ] **準確性**：與實際元件 API 一致
- [ ] **可用性**：開發者可以直接根據文件開發
- [ ] **一致性**：所有模組文件結構一致
- [ ] **範例性**：包含足夠的程式碼範例

### 開發就緒標準

- [ ] 每個模組都有清晰的 UI 結構定義
- [ ] 每個模組都有完整的類型定義
- [ ] 每個模組都有開發檢查清單
- [ ] 所有程式碼範例都可執行
- [ ] 用戶已 Review 並確認

---

## 時間估算

| Phase | 預估時間 | 累計時間 |
|-------|---------|---------|
| Phase 1 | 已完成 | - |
| Phase 2 | 1-2 小時 | 1-2 小時 |
| Phase 3 | 2-3 小時 | 3-5 小時 |
| Phase 4 | 2-3 小時 | 5-8 小時 |
| Phase 5 | 2-3 小時 | 7-11 小時 |
| Phase 6 | 2-3 小時 | 9-14 小時 |
| Phase 7 | 1-2 小時 | 10-16 小時 |

**總計**：約 10-16 小時（分多次執行）
